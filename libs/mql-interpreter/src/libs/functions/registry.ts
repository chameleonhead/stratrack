import type { BuiltinFunction } from "./types";
import * as AccountInfo from "./account";
import {
  IndicatorBuffers,
  SetIndexBuffer,
  SetIndexLabel,
  SetIndexShift,
  IndicatorCounted,
  IndicatorDigits,
  IndicatorSetDouble,
  IndicatorSetInteger,
  IndicatorSetString,
  IndicatorShortName,
  iMA,
  iMACD,
  iRSI,
  iATR,
} from "./indicators";
import { FileOpen, FileReadString, FileWriteString, FileClose } from "./files";
import {
  ArrayResize,
  ArrayCopy,
  ArraySetAsSeries,
  ArrayGetAsSeries,
  ArrayIsSeries,
  ArrayIsDynamic,
  ArraySize,
  ArrayRange,
  ArrayDimension,
  ArrayFree,
  ArrayInitialize,
  ArrayFill,
  ArraySort,
  ArrayMaximum,
  ArrayMinimum,
  ArrayBsearch,
  ArrayCompare,
} from "./array";
import {
  CharToString,
  CharToStr,
  CharArrayToString,
  StringToCharArray,
  StringFormat,
  StringToTime,
  TimeToString,
  TimeToStr,
  DoubleToString,
  DoubleToStr,
  IntegerToString,
  StringToDouble,
  StrToDouble,
  StringToInteger,
  StrToInteger,
  NormalizeDouble,
} from "./convert";
import {
  MathAbs,
  MathArccos,
  MathArcsin,
  MathArctan,
  MathCeil,
  MathCos,
  MathExp,
  MathFloor,
  MathLog,
  MathLog10,
  MathMax,
  MathMin,
  MathMod,
  MathPow,
  MathRand,
  MathRound,
  MathSin,
  MathSqrt,
  MathSrand,
  MathTan,
  MathIsValidNumber,
} from "./math";
import {
  StringTrimLeft,
  StringTrimRight,
  StringLen,
  StringSubstr,
  StringAdd,
  StringBufferLen,
  StringCompare,
  StringConcatenate,
  StringFill,
  StringFind,
  StringGetChar,
  StringSetChar,
  StringInit,
  StringReplace,
  StringSplit,
  StringToLower,
  StringToUpper,
  StringGetCharacter,
  StringSetCharacter,
} from "./strings";
import {
  Day,
  DayOfWeek,
  DayOfYear,
  Hour,
  Minute,
  Month,
  Seconds,
  Year,
  TimeCurrent,
  TimeLocal,
  TimeGMT,
  TimeDaylightSavings,
  TimeGMTOffset,
  TimeToStruct,
  StructToTime,
  TimeDay,
  TimeDayOfWeek,
  TimeDayOfYear,
  TimeHour,
  TimeMinute,
  TimeMonth,
  TimeSeconds,
  TimeYear,
} from "./dateandtime";
import {
  Bars,
  iBars,
  iBarShift,
  iOpen,
  iHigh,
  iLow,
  iClose,
  iTime,
  iVolume,
  CopyRates,
  CopyTime,
  CopyOpen,
  CopyHigh,
  CopyLow,
  CopyClose,
  CopyTickVolume,
  SeriesInfoInteger,
  RefreshRates,
} from "./series";
import {
  Print,
  Alert,
  PrintFormat,
  Comment,
  GetTickCount,
  GetTickCount64,
  GetMicrosecondCount,
  Sleep,
  PlaySound,
  SendMail,
  SendNotification,
  SendFTP,
  TerminalClose,
  ExpertRemove,
  DebugBreak,
  MessageBox,
  WebRequest,
  TerminalCompany,
  TerminalName,
  TerminalPath,
  IsTesting,
  IsOptimization,
  IsVisualMode,
  IsDemo,
  IsConnected,
  IsTradeAllowed,
  IsTradeContextBusy,
  UninitializeReason,
} from "./common";
import {
  EventSetTimer,
  EventSetMillisecondTimer,
  EventKillTimer,
  EventChartCustom,
} from "./eventFunctions";
import {
  GlobalVariableSet,
  GlobalVariableGet,
  GlobalVariableDel,
  GlobalVariableCheck,
  GlobalVariableTime,
  GlobalVariablesDeleteAll,
  GlobalVariablesTotal,
  GlobalVariableName,
  GlobalVariableTemp,
  GlobalVariableSetOnCondition,
  GlobalVariablesFlush,
} from "./globals";
import { setContext } from "./context";

export const coreBuiltins: Record<string, BuiltinFunction> = {
  Print,
  Alert,
  ArrayResize,
  ArrayCopy,
  ArraySetAsSeries,
  ArrayGetAsSeries,
  ArrayIsSeries,
  ArrayIsDynamic,
  ArraySize,
  ArrayRange,
  ArrayDimension,
  ArrayFree,
  ArrayInitialize,
  ArrayFill,
  ArraySort,
  ArrayMaximum,
  ArrayMinimum,
  ArrayBsearch,
  ArrayCompare,
  StringTrimLeft,
  StringTrimRight,
  StringLen,
  StringSubstr,
  StringAdd,
  StringBufferLen,
  StringCompare,
  StringConcatenate,
  StringFill,
  StringFind,
  StringGetChar,
  StringSetChar,
  StringInit,
  StringReplace,
  StringSplit,
  StringToLower,
  StringToUpper,
  StringGetCharacter,
  StringSetCharacter,
  PrintFormat,
  Comment,
  GetTickCount,
  GetTickCount64,
  GetMicrosecondCount,
  Sleep,
  EventSetTimer,
  EventSetMillisecondTimer,
  EventKillTimer,
  EventChartCustom,
  PlaySound,
  SendMail,
  SendNotification,
  SendFTP,
  TerminalClose,
  ExpertRemove,
  DebugBreak,
  MessageBox,
  WebRequest,
  GlobalVariableSet,
  GlobalVariableGet,
  GlobalVariableDel,
  GlobalVariableCheck,
  GlobalVariableTime,
  GlobalVariablesDeleteAll,
  GlobalVariablesTotal,
  GlobalVariableName,
  GlobalVariableTemp,
  GlobalVariableSetOnCondition,
  GlobalVariablesFlush,
  FileOpen,
  FileReadString,
  FileWriteString,
  FileClose,
  TerminalCompany,
  TerminalName,
  TerminalPath,
  IsTesting,
  IsOptimization,
  IsVisualMode,
  IsDemo,
  IsConnected,
  IsTradeAllowed,
  IsTradeContextBusy,
  UninitializeReason,
  CharToString,
  CharToStr,
  CharArrayToString,
  StringToCharArray,
  StringFormat,
  StringToTime,
  TimeToString,
  TimeToStr,
  NormalizeDouble,
  DoubleToString,
  DoubleToStr,
  IntegerToString,
  StringToDouble,
  StrToDouble,
  StringToInteger,
  StrToInteger,
  MathAbs,
  MathArccos,
  MathArcsin,
  MathArctan,
  MathCeil,
  MathCos,
  MathExp,
  MathFloor,
  MathLog,
  MathLog10,
  MathMax,
  MathMin,
  MathMod,
  MathPow,
  MathRand,
  MathRound,
  MathSin,
  MathSqrt,
  MathSrand,
  MathTan,
  MathIsValidNumber,
  Day,
  DayOfWeek,
  DayOfYear,
  Hour,
  Minute,
  Month,
  Seconds,
  Year,
  TimeCurrent,
  TimeLocal,
  TimeGMT,
  TimeDaylightSavings,
  TimeGMTOffset,
  TimeToStruct,
  StructToTime,
  TimeDay,
  TimeDayOfWeek,
  TimeDayOfYear,
  TimeHour,
  TimeMinute,
  TimeMonth,
  TimeSeconds,
  TimeYear,
};

const ResetLastError: BuiltinFunction = () => 0;

export const envBuiltins: Record<string, BuiltinFunction> = {
  ...AccountInfo,
  iMA,
  iMACD,
  iRSI,
  iATR,
  Bars,
  iBars,
  iBarShift,
  iOpen,
  iHigh,
  iLow,
  iClose,
  iTime,
  iVolume,
  CopyRates,
  CopyTime,
  CopyOpen,
  CopyHigh,
  CopyLow,
  CopyClose,
  CopyTickVolume,
  SeriesInfoInteger,
  RefreshRates,
  ResetLastError,
  IndicatorBuffers,
  SetIndexBuffer,
  SetIndexLabel,
  SetIndexShift,
  IndicatorCounted,
  IndicatorDigits,
  IndicatorSetDouble,
  IndicatorSetInteger,
  IndicatorSetString,
  IndicatorShortName,
};

export { setContext };
