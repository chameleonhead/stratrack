export type BuiltinFunction = (...args: any[]) => any;

const noop: BuiltinFunction = () => 0;

const builtins: Record<string, BuiltinFunction> = {
  Print: (...args: any[]) => {
    console.log(...args);
    return 0;
  },
  Alert: (...args: any[]) => {
    console.log(...args);
    return true;
  },
  OrderSend: (..._args: any[]) => 0,
  iMA: (..._args: any[]) => 0,
  // Account information functions (stubs)
  AccountBalance: noop,
  AccountCompany: () => '',
  AccountCredit: noop,
  AccountCurrency: () => '',
  AccountEquity: noop,
  AccountFreeMargin: noop,
  AccountFreeMarginCheck: noop,
  AccountFreeMarginMode: noop,
  AccountInfoDouble: noop,
  AccountInfoInteger: noop,
  AccountInfoString: () => '',
  AccountLeverage: noop,
  AccountMargin: noop,
  AccountName: () => '',
  AccountNumber: noop,
  AccountProfit: noop,
  AccountServer: () => '',
  AccountStopoutLevel: noop,
  AccountStopoutMode: noop,
};

const stubNames = [

  'acos',
  'ArrayBsearch',
  'ArrayCompare',
  'ArrayCopy',
  'ArrayCopyRates',
  'ArrayCopySeries',
  'ArrayDimension',
  'ArrayFill',
  'ArrayFree',
  'ArrayGetAsSeries',
  'ArrayInitialize',
  'ArrayIsDynamic',
  'ArrayIsSeries',
  'ArrayMaximum',
  'ArrayMinimum',
  'ArrayRange',
  'ArrayResize',
  'ArraySetAsSeries',
  'ArraySize',
  'ArraySort',
  'asin',
  'atan',
  'Bars',
  'ceil',
  'CharArrayToString',
  'ChartApplyTemplate',
  'ChartClose',
  'ChartFirst',
  'ChartGetDouble',
  'ChartGetInteger',
  'ChartGetString',
  'ChartID',
  'ChartIndicatorDelete',
  'ChartIndicatorName',
  'ChartIndicatorsTotal',
  'ChartNavigate',
  'ChartNext',
  'ChartOpen',
  'CharToStr',
  'CharToString',
  'ChartPeriod',
  'ChartPriceOnDropped',
  'ChartRedraw',
  'ChartSaveTemplate',
  'ChartScreenShot',
  'ChartSetDouble',
  'ChartSetInteger',
  'ChartSetString',
  'ChartSetSymbolPeriod',
  'ChartSymbol',
  'ChartTimeOnDropped',
  'ChartTimePriceToXY',
  'ChartWindowFind',
  'ChartWindowOnDropped',
  'ChartXOnDropped',
  'ChartXYToTimePrice',
  'ChartYOnDropped',
  'CheckPointer',
  'ColorToARGB',
  'ColorToString',
  'Comment',
  'CopyClose',
  'CopyHigh',
  'CopyLow',
  'CopyOpen',
  'CopyRates',
  'Rates',
  'CopyTickVolume',
  'CopyTime',
  'cos',
  'CryptDecode',
  'CryptEncode',
  'Day',
  'DayOfWeek',
  'DayOfYear',
  'DebugBreak',
  'Digits',
  'Checkup',
  'DoubleToStr',
  'DoubleToString',
  'EnumToString',
  'EventChartCustom',
  'EventKillTimer',
  'EventSetMillisecondTimer',
  'EventSetTimer',
  'exp',
  'ExpertRemove',
  'fabs',
  'FileClose',
  'FileCopy',
  'FileDelete',
  'FileFindClose',
  'FileFindFirst',
  'FileFindNext',
  'FileFlush',
  'FileGetInteger',
  'FileIsEnding',
  'FileIsExist',
  'FileIsLineEnding',
  'FileMove',
  'FileOpen',
  'FileOpenHistory',
  'FileReadArray',
  'FileReadBool',
  'FileReadDatetime',
  'FileReadDouble',
  'FileReadFloat',
  'FileReadInteger',
  'FileReadLong',
  'FileReadNumber',
  'FileReadString',
  'FileReadStruct',
  'FileSeek',
  'FileSize',
  'FileTell',
  'FileWrite',
  'FileWriteArray',
  'FileWriteDouble',
  'FileWriteFloat',
  'FileWriteInteger',
  'FileWriteLong',
  'FileWriteString',
  'FileWriteStruct',
  'floor',
  'fmax',
  'fmin',
  'fmod',
  'FolderClean',
  'FolderCreate',
  'FolderDelete',
  'GetLastError',
  'GetPointer',
  'pointer',
  'GetTickCount',
  'GlobalVariableCheck',
  'GlobalVariableDel',
  'GlobalVariableGet',
  'GlobalVariableName',
  'GlobalVariablesDeleteAll',
  'GlobalVariableSet',
  'GlobalVariableSetOnCondition',
  'GlobalVariablesFlush',
  'GlobalVariablesTotal',
  'GlobalVariableTemp',
  'GlobalVariableTime',
  'HideTestIndicators',
  'Hour',
  'iAC',
  'iAD',
  'iADX',
  'iAlligator',
  'iAO',
  'iATR',
  'iBands',
  'iBandsOnArray',
  'iBars',
  'iBarShift',
  'iBearsPower',
  'iBullsPower',
  'iBWMFI',
  'iCCI',
  'iCCIOnArray',
  'iClose',
  'iCustom',
  'iDeMarker',
  'iEnvelopes',
  'iEnvelopesOnArray',
  'iForce',
  'iFractals',
  'iGator',
  'iHigh',
  'iHighest',
  'iIchimoku',
  'iLow',
  'iLowest',
  'iMACD',
  'iMAOnArray',
  'iMFI',
  'iMomentum',
  'iMomentumOnArray',
  'IndicatorBuffers',
  'IndicatorCounted',
  'IndicatorDigits',
  'IndicatorSetDouble',
  'double',
  'IndicatorSetInteger',
  'int',
  'IndicatorSetString',
  'string',
  'IndicatorShortName',
  'IntegerToString',
  'iOBV',
  'iOpen',
  'iOsMA',
  'iRSI',
  'iRSIOnArray',
  'iRVI',
  'iSAR',
  'IsConnected',
  'IsDemo',
  'IsDllsAllowed',
  'IsExpertEnabled',
  'IsLibrariesAllowed',
  'IsOptimization',
  'IsStopped',
  'iStdDev',
  'iStdDevOnArray',
  'IsTesting',
  'iStochastic',
  'IsTradeAllowed',
  'IsTradeContextBusy',
  'IsVisualMode',
  'iTime',
  'iVolume',
  'iWPR',
  'log',
  'log10',
  'MarketInfo',
  'MathAbs',
  'MathArccos',
  'MathArcsin',
  'MathArctan',
  'MathCeil',
  'MathCos',
  'MathExp',
  'MathFloor',
  'MathIsValidNumber',
  'MathLog',
  'MathLog10',
  'MathMax',
  'MathMin',
  'MathMod',
  'MathPow',
  'MathRand',
  'MathRound',
  'MathSin',
  'MathSqrt',
  'MathSrand',
  'MathTan',
  'MessageBox',
  'Minute',
  'Month',
  'MQLInfoInteger',
  'MQLInfoString',
  'MQLSetInteger',
  'NormalizeDouble',
  'ObjectCreate',
  'ObjectDelete',
  'ObjectDescription',
  'ObjectFind',
  'ObjectGet',
  'ObjectGetDouble',
  'ObjectGetFiboDescription',
  'ObjectGetInteger',
  'ObjectGetShiftByValue',
  'ObjectGetString',
  'ObjectGetTimeByValue',
  'ObjectGetValueByShift',
  'ObjectGetValueByTime',
  'ObjectMove',
  'ObjectName',
  'ObjectsDeleteAll',
  'ObjectSet',
  'ObjectSetDouble',
  'ObjectSetFiboDescription',
  'ObjectSetInteger',
  'ObjectSetString',
  'ObjectSetText',
  'ObjectsTotal',
  'ObjectType',
  'OrderClose',
  'OrderCloseBy',
  'OrderClosePrice',
  'OrderCloseTime',
  'OrderComment',
  'OrderCommission',
  'OrderDelete',
  'OrderExpiration',
  'OrderLots',
  'OrderMagicNumber',
  'OrderModify',
  'OrderOpenPrice',
  'OrderOpenTime',
  'OrderPrint',
  'OrderProfit',
  'OrderSelect',
  'OrdersHistoryTotal',
  'OrderStopLoss',
  'OrdersTotal',
  'OrderSwap',
  'OrderSymbol',
  'OrderTakeProfit',
  'OrderTicket',
  'OrderType',
  'Period',
  'PeriodSeconds',
  'PlaySound',
  'Point',
  'pow',
  'PrintFormat',
  'rand',
  'RefreshRates',
  'ResetLastError',
  '_LastError',
  'ResourceCreate',
  'ResourceFree',
  'ResourceReadImage',
  'ResourceSave',
  'round',
  'Seconds',
  'SendFTP',
  'SendMail',
  'SendNotification',
  'SeriesInfoInteger',
  'SetIndexArrow',
  'SetIndexBuffer',
  'array',
  'SetIndexDrawBegin',
  'SetIndexEmptyValue',
  'SetIndexLabel',
  'SetIndexShift',
  'SetIndexStyle',
  'SetLevelStyle',
  'SetLevelValue',
  'ShortArrayToString',
  'ShortToString',
  'SignalBaseGetDouble',
  'SignalBaseGetInteger',
  'SignalBaseGetString',
  'SignalBaseSelect',
  'SignalBaseTotal',
  'SignalInfoGetDouble',
  'SignalInfoGetInteger',
  'SignalInfoGetString',
  'SignalInfoSetDouble',
  'SignalInfoSetInteger',
  'SignalSubscribe',
  'SignalUnsubscribe',
  'sin',
  'Sleep',
  'sqrt',
  'srand',
  'StringAdd',
  'StringBufferLen',
  'StringCompare',
  'StringConcatenate',
  'StringFill',
  'StringFind',
  'StringFormat',
  'StringGetChar',
  'StringGetCharacter',
  'StringInit',
  'StringLen',
  'StringReplace',
  'StringSetChar',
  'StringSetCharacter',
  'StringSplit',
  'StringSubstr',
  'StringToCharArray',
  'StringToColor',
  'StringToDouble',
  'StringToInteger',
  'StringToLower',
  'StringToShortArray',
  'StringToTime',
  'StringToUpper',
  'StringTrimLeft',
  'StringTrimRight',
  'StrToDouble',
  'StrToInteger',
  'StrToTime',
  'StructToTime',
  'Symbol',
  'SymbolInfoDouble',
  'SymbolInfoInteger',
  'SymbolInfoSessionQuote',
  'SymbolInfoSessionTrade',
  'SymbolInfoString',
  'SymbolInfoTick',
  'MqlTick',
  'SymbolName',
  'SymbolSelect',
  'SymbolsTotal',
  'tan',
  'TerminalClose',
  'TerminalCompany',
  'TerminalInfoDouble',
  'TerminalInfoInteger',
  'TerminalInfoString',
  'TerminalName',
  'TerminalPath',
  'TesterStatistics',
  'TextGetSize',
  'TextOut',
  'resource',
  'TextSetFont',
  'TimeCurrent',
  'TimeDay',
  'TimeDaylightSavings',
  'TimeDayOfWeek',
  'TimeDayOfYear',
  'TimeGMT',
  'TimeGMTOffset',
  'TimeHour',
  'TimeLocal',
  'TimeMinute',
  'TimeMonth',
  'TimeSeconds',
  'TimeToStr',
  'TimeToString',
  'TimeToStruct',
  'TimeYear',
  'UninitializeReason',
  'WebRequest',
  'WindowBarsPerChart',
  'WindowExpertName',
  'WindowFind',
  'WindowFirstVisibleBar',
  'WindowHandle',
  'WindowIsVisible',
  'WindowOnDropped',
  'WindowPriceMax',
  'WindowPriceMin',
  'WindowPriceOnDropped',
  'WindowRedraw',
  'WindowScreenShot',
  'WindowsTotal',
  'WindowTimeOnDropped',
  'WindowXOnDropped',
  'WindowYOnDropped',
  'Year',
  'ZeroMemory',
];
for (const name of stubNames) {
  if (!builtins[name]) builtins[name] = noop;
}

export function getBuiltin(name: string): BuiltinFunction | undefined {
  return builtins[name];
}

